webpackJsonp([8],{Rgct:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("d5Yy"),r=s("7t+N"),a=function(t,e,s,i){this._datafeedURL=t,this.coin=e,this.stompClient=s,this.lastBar=null,this.currentBar=null,this.subscribe=!0,this.scale=i};a.prototype.onReady=function(t){var e={exchanges:[],supported_resolutions:["1","5","15","30","60","240","1D","1W","1M"],supports_group_request:!1,supports_marks:!1,supports_search:!1,supports_time:!0,supports_timescale_marks:!1};r("#"+window.tvWidget.id).contents().on("click",".date-range-list>a",function(){window.tvWidget&&("分时"==r(this).html()?(r(this).parent().addClass("real-op").removeClass("common-op"),window.tvWidget.chart().setChartType(3)):(r(this).parent().addClass("common-op").removeClass("real-op"),window.tvWidget.chart().setChartType(1)))}),setTimeout(function(){t(e)},0)},a.prototype.subscribeBars=function(t,e,s,i,r){var a=this;this.stompClient.subscribe("/topic/swap/trade/"+t.name,function(t){var e=JSON.parse(t.body);if(null!=a.lastBar&&e.length>0){var i=e[e.length-1].price;a.lastBar.close=i,i>a.lastBar.high&&(a.lastBar.high=i),i<a.lastBar.low&&(a.lastBar.low=i),s(a.lastBar)}}),this.stompClient.subscribe("/topic/swap/thumb",function(e){var i=JSON.parse(e.body);if(i.symbol==t.name&&null!=a.lastBar&&i.length>0){var r=i.price;a.lastBar.close=r,r>a.lastBar.high&&(a.lastBar.high=r),r<a.lastBar.low&&(a.lastBar.low=r),s(a.lastBar)}}),this.stompClient.subscribe("/topic/swap/kline/"+t.name,function(t){null!=a.currentBar&&s(a.currentBar);var e=JSON.parse(t.body),i=1e3*e.time;i-a.currentBar.time>0&&i-a.currentBar.time<864e5&&(a.lastBar={time:1e3*e.time,open:e.openPrice,high:e.highestPrice,low:e.lowestPrice,close:e.closePrice,volume:e.volume},a.currentBar=a.lastBar,s(a.lastBar))})},a.prototype.unsubscribeBars=function(t){this.subscribe=!1},a.prototype.resolveSymbol=function(t,e,s){var i={name:this.coin.symbol,"exchange-traded":"","exchange-listed":"",minmov:1,volumescale:1e4,has_daily:!0,has_weekly_and_monthly:!0,has_intraday:!0,description:this.coin.symbol,type:"bitcoin",session:"24x7",supported_resolutions:["1","5","15","30","60","240","1D","1W","1M"],pricescale:Math.pow(10,this.scale||2),ticker:"",timezone:"Asia/Shanghai"};setTimeout(function(){e(i)},0)},a.prototype._send=function(t,e){var s=t;if(e)for(var i=0;i<Object.keys(e).length;++i){var a=Object.keys(e)[i],n=encodeURIComponent(e[a]);s+=(0===i?"?":"&")+a+"="+n}return r.ajax({type:"GET",url:s,dataType:"json"})},a.prototype.getBars=function(t,e,s,i,r,a,n){var o=[],l=this;this._send(this._datafeedURL+"/history",{symbol:t.name,from:1e3*s,to:n?(new Date).getTime():1e3*i,resolution:e}).done(function(t){for(var e=t,s=0;s<e.length;s++){var i=e[s];o.push({time:i[0],open:i[1],high:i[2],low:i[3],close:i[4],volume:i[5]})}l.lastBar=o.length>0?o[o.length-1]:null,l.currentBar=l.lastBar;var a=0==o.length;r(o,{noData:a})}).fail(function(t){a(t)})},a.prototype.periodLengthSeconds=function(t,e){return 24*("D"===t?e:"M"===t?31*e:"W"===t?7*e:"H"===t?e*t/24:e*t/1440)*60*60};var n=a,o=s("H6tP"),l=s("wPKN"),c=s.n(l),u=s("0tEf"),p=s("O3w4"),h=s("PJh5"),d={components:{expandRow:i.a,DepthGraph:o.a},data(){let t=this;return{buyLeverage:"10",sellLeverage:"10",changeLeverageType:1,leverageList:[],leverageModal:!1,leverageLong:10,leverageShort:10,leverageAdjustVal:10,checkSellCount:0,checkBuyCount:0,checkAllCount:0,marginModeModal:!1,marginMode:"1",accountMode:0,entrustType:1,entrustOrderType:"1",sliderStep:[25,50,75,100],sliderOpenPercent:0,sliderClosePercent:0,memberRate:0,collecRequesting:!1,currentCoinIsFavor:!1,isUseBHB:!1,skin:"night",currentImgTable:"k",selectedOrder:"currentPositions",selectedPlate:"all",CNYRate:null,datafeed:null,defaultPath:"btc_usdt",basecion:"usdt",coinScale:6,baseCoinScale:6,symbolFee:.001,dataIndex:[],searchKey:"",coinInfo:{},leverageType:1,contractCoinInfo:{id:0,baseSymbol:"",coinSymbol:"",symbol:"",openFee:0,closeFee:0,enableTriggerEntrust:1,feePercent:0,leverageType:1,leverage:"10,20,30,40,50,60,70,80,90,100",maxShare:0,minShare:0,shareNumber:0},contractWalletInfo:{usdtBalance:0,usdtBuyPosition:0,usdtSellPosition:0,usdtBuyLeverage:10,usdtSellLeverage:10,usdtFrozenBalance:0,usdtBuyPrincipalAmount:0,usdtSellPrincipalAmount:0},currentCoin:{base:"",coin:"",symbol:"",price:0},enableMarketBuy:1,enableMarketSell:1,exchangeable:1,currentEntrustOrderList:[],historyEntrustOrderList:[],currentPositionList:[],coins:{_map:[],USDT:[],columns:[{title:this.$t("swap.contract")+"/"+this.$t("swap.vol"),key:"coin",minWidth:70,sortable:!1,className:"coin-menu-symbol swap-coin-menu-symbol",render:(t,e)=>t("div",{style:{padding:"5px 0"}},[t("span",{style:{fontSize:"14px",fontWeight:"bold"}},e.row.coin+"/USDT "+this.$t("swap.swapindex")),t("br"),t("span",{style:{color:"#61688A",fontSize:"14px"}},e.row.volume.toFixed(4))])},{title:this.$t("swap.lastprice")+"/"+this.$t("swap.daychange"),key:"rose",className:"swap-coin-menu-lastprice",sortMethod:function(t,e,s){let i=t.replace(/[^\d|.|-]/g,"")-0,r=e.replace(/[^\d|.|-]/g,"")-0;return"asc"==s?i-r:r-i},render:(t,e)=>{const s=e.row,i=parseFloat(s.rose)<0?"sell":"buy";return t("div",{style:{padding:"5px 10px",textAlign:"right",fontSize:"14px"}},[t("span",e.row.close),t("br"),t("span",{attrs:{class:i}},s.rose)])}}]},wallet:{base:0,coin:0},showMarket:!1,fixHistoryHeight:295,form:{trigglePrice:"",entrustPrice:"",volume:""},trade:{rows:[],columns:[{title:t.$t("swap.price"),key:"price",render:(t,e)=>{return t("span",{attrs:{class:"BUY"==e.row.direction?"buy":"sell"}},e.row.price.toFixed(4))},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.price")+"("+t.currentCoin.base+")")}},{title:t.$t("swap.num"),key:"amount",render:(t,e)=>t("span",{},e.row.amount.toFixed(4)),renderHeader:(e,s)=>{return e("span",{},t.$t("swap.num")+"("+t.currentCoin.coin+")")}},{title:t.$t("swap.time"),key:"time",render:(t,e)=>t("span",{},this.timeFormat(e.row.time))}]},plate:{maxPostion:10,columns:[{title:t.$t("swap.price"),key:"price",render:(t,e)=>{let s="",i="";const r=e.row.direction.toLowerCase();return 0==e.row.price&&(s=t("span",{},"--")),0!=e.row.price&&(i=e.row.price.toFixed(4))&&(s=t("span",{attrs:{class:r}},i)),s},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.price")+"("+t.currentCoin.base+")")}},{title:t.$t("swap.num"),key:"amount",render:(t,e)=>{let s="";return 0==e.row.amount&&(s=t("span",{},"--")),0!=e.row.amount&&(s=t("span",{},e.row.amount.toFixed(4))),s},renderHeader:(e,s)=>{return e("span",{},t.$t("swap.num")+"("+t.currentCoin.coin+")")}},{title:t.$t("swap.total"),key:"totalAmount",render:(t,e)=>0==e.row.price||0==e.row.totalAmount?t("span",{},"--"):t("span",{},e.row.totalAmount.toFixed(4)),renderHeader:(e,s)=>{return e("span",{},t.$t("swap.total")+"("+t.currentCoin.coin+")")}},{className:"percenttd",width:1,render:(t,e)=>{let s="0",i="BUY"===e.row.direction?"#00b275":"#f15057",r="BUY"===e.row.direction?this.plate.bidTotle:this.plate.askTotle;return e.row.totalAmount&&(s=100*(e.row.totalAmount/r).toFixed(4)+"%"),t("div",{style:{width:s,backgroundColor:i},attrs:{class:"percentdiv"}}," ")}}],askRows:[],bidRows:[]},currentPosition:{columns:[{title:t.$t("swap.pos_leverage"),key:"leverage",render:(t,e)=>"Buy"==e.row.direction?t("span",{style:{color:"#FFF",backgroundColor:"#42b983",padding:"3px 5px",borderRadius:"3px",display:"inline-block",width:"80px"}},this.$t("swap.pos_long")+" "+e.row.leverage+"X"):t("span",{style:{color:"#FFF",backgroundColor:"#FF0000",padding:"3px 5px",borderRadius:"3px",display:"inline-block",width:"80px"}},this.$t("swap.pos_short")+" "+e.row.leverage+"X")},{title:t.$t("swap.pos_Pl"),key:"pl",render:(t,e)=>e.row.pl>0?t("span",{style:{color:"#42b983"}},"+"+e.row.pl.toFixed(4)+" USDT"):t("span",{style:{color:"#FF0000"}},e.row.pl.toFixed(4)+" USDT")},{title:t.$t("swap.pos_Ratio"),key:"plRatio",render:(t,e)=>e.row.plRatio>0?t("span",{style:{color:"#42b983"}},(100*e.row.plRatio).toFixed(2)+" %"):t("span",{style:{color:"#FF0000"}},(100*e.row.plRatio).toFixed(2)+" %")},{title:t.$t("swap.pos_pos"),key:"position",render:(t,e)=>t("span",{},e.row.position+this.$t("swap.shareNumber"))},{title:t.$t("swap.pos_canClose"),key:"avaPosition",render:(t,e)=>t("span",{},e.row.avaPosition+this.$t("swap.shareNumber"))},{title:t.$t("swap.pos_openPrice"),key:"openPrice",render:(t,e)=>t("span",{},e.row.openPrice.toFixed(4)+" USDT")},{title:t.$t("swap.pos_margin"),key:"margin",render:(t,e)=>t("span",{},e.row.margin.toFixed(2)+" USDT")},{title:t.$t("swap.pos_mRatio"),key:"mRatio",render:(t,e)=>t("span",{},(100*e.row.mRatio).toFixed(2)+" %")}]},currentOrder:{columns:[{title:t.$t("swap.time"),key:"createTime",render:(t,e)=>t("span",{},this.dateFormat(e.row.createTime))},{title:t.$t("swap.ent_entrustType"),key:"entrustType",render:(t,e)=>"OPEN"==e.row.entrustType?t("span",{},this.$t("swap.open")):t("span",{},this.$t("swap.close"))},{title:t.$t("swap.ent_direction"),key:"direction",render:(t,e)=>"OPEN"==e.row.entrustType?"BUY"==e.row.direction?t("span",{style:{color:"#42b983"}},this.$t("swap.openup")):t("span",{style:{color:"#FF0000"}},this.$t("swap.opendown")):"BUY"==e.row.direction?t("span",{style:{color:"#42b983"}},this.$t("swap.closeup")):t("span",{style:{color:"#FF0000"}},this.$t("swap.closedown"))},{title:t.$t("swap.ent_type"),key:"type",render:(t,e)=>"LIMIT_PRICE"==e.row.type?t("span",{},this.$t("swap.limited_price")):"MARKET_PRICE"==e.row.type?t("span",{},this.$t("swap.market_price")):t("span",{},this.$t("swap.spot_price"))},{title:t.$t("swap.ent_trigglePrice"),key:"trigglePrice",render:(t,e)=>"SPOT_LIMIT"==e.row.type?t("span",{},e.row.triggerPrice.toFixed(2)):t("span",{},"--")},{title:t.$t("swap.ent_entrustPrice"),key:"entrustPrice",render:(t,e)=>t("span",{},e.row.entrustPrice.toFixed(2))},{title:t.$t("swap.ent_tradedPrice"),key:"tradedPrice",render:(t,e)=>t("span",{},e.row.tradedPrice.toFixed(2))},{title:t.$t("swap.ent_margin"),key:"principalAmount",render:(t,e)=>t("span",{},e.row.principalAmount.toFixed(2)+"USDT")},{title:t.$t("swap.ent_volume"),key:"volume",render:(t,e)=>t("span",{},e.row.volume+this.$t("swap.shareNumber"))},{title:t.$t("swap.ent_status"),key:"status",render:(t,e)=>"ENTRUST_ING"==e.row.status?t("span",{},this.$t("swap.ent_status1")):"ENTRUST_CANCEL"==e.row.status?t("span",{},this.$t("swap.ent_status2")):"ENTRUST_FAILURE"==e.row.status?t("span",{},this.$t("swap.ent_status3")):"ENTRUST_SUCCESS"==e.row.status?t("span",{},this.$t("swap.ent_status4")):void 0},{title:t.$t("swap.action"),key:"operate",width:110,render:(e,s)=>e("Button",{props:{size:"small"},style:{color:"#f1ac19","line-height":"1.2",backgroundColor:"transparent"},on:{click:()=>{this.cancel(s.row.id)}}},t.$t("swap.undo"))}],rows:[]},historyOrder:{pageSize:10,total:10,page:0,columns:[{title:t.$t("swap.time"),key:"createTime",render:(t,e)=>t("span",{},this.dateFormat(e.row.createTime))},{title:t.$t("swap.ent_entrustType"),key:"entrustType",render:(t,e)=>"OPEN"==e.row.entrustType?t("span",{},this.$t("swap.open")):t("span",{},this.$t("swap.close"))},{title:t.$t("swap.ent_direction"),key:"direction",render:(t,e)=>"OPEN"==e.row.entrustType?"BUY"==e.row.direction?t("span",{style:{color:"#42b983"}},this.$t("swap.openup")):t("span",{style:{color:"#FF0000"}},this.$t("swap.opendown")):"BUY"==e.row.direction?t("span",{style:{color:"#42b983"}},this.$t("swap.closeup")):t("span",{style:{color:"#FF0000"}},this.$t("swap.closedown"))},{title:t.$t("swap.ent_type"),key:"type",render:(t,e)=>1==e.row.isFromSpot?t("span",{},this.$t("swap.spot_price")):"LIMIT_PRICE"==e.row.type?t("span",{},this.$t("swap.limited_price")):"MARKET_PRICE"==e.row.type?t("span",{},this.$t("swap.market_price")):t("span",{},this.$t("swap.spot_price"))},{title:t.$t("swap.ent_trigglePrice"),key:"trigglePrice",render:(t,e)=>1==e.row.isFromSpot?t("span",{},e.row.triggerPrice.toFixed(2)):"SPOT_PRICE"==e.row.type?t("span",{},e.row.triggerPrice.toFixed(2)):t("span",{},"--")},{title:t.$t("swap.ent_entrustPrice"),key:"entrustPrice",render:(t,e)=>t("span",{},e.row.entrustPrice.toFixed(2))},{title:t.$t("swap.ent_tradedPrice"),key:"tradedPrice",render:(t,e)=>t("span",{},e.row.tradedPrice.toFixed(2))},{title:t.$t("swap.ent_margin"),key:"principalAmount",render:(t,e)=>t("span",{},e.row.principalAmount.toFixed(2)+"USDT")},{title:t.$t("swap.ent_volume"),key:"volume",render:(t,e)=>t("span",{},e.row.volume+this.$t("swap.shareNumber"))},{title:t.$t("swap.ent_fee"),key:"volume",render:(t,e)=>"ENTRUST_CANCEL"==e.row.status?t("span",{},"--"):"OPEN"==e.row.entrustType?t("span",{},e.row.openFee):"CLOSE"==e.row.entrustType?t("span",{},e.row.closeFee):void 0},{title:t.$t("swap.ent_pl"),key:"profitAndLoss",render:(t,e)=>"CLOSE"==e.row.entrustType?e.row.profitAndLoss<0?t("span",{style:{color:"#FF0000"}},e.row.profitAndLoss.toFixed(2)):t("span",{style:{color:"#42b983"}},e.row.profitAndLoss.toFixed(2)):t("span",{},"--")},{title:t.$t("swap.ent_status"),key:"volume",render:(t,e)=>1==e.row.isBlast?t("span",{},this.$t("swap.ent_statusblast")):"ENTRUST_CANCEL"==e.row.status?t("span",{},this.$t("swap.ent_status2")):"ENTRUST_FAILURE"==e.row.status?t("span",{},this.$t("swap.ent_status3")):"ENTRUST_SUCCESS"==e.row.status?t("span",{},this.$t("swap.ent_status4")):void 0}],rows:[]},fullTrade:{}}},filters:{},computed:{rechargeUSDTUrl:function(){return"/uc/recharge?name="+this.currentCoin.base},rechargeCoinUrl:function(){return"/uc/recharge?name="+this.currentCoin.coin},isLogin:function(){return this.$store.getters.isLogin},member:function(){return this.$store.getters.member},lang:function(){return this.$store.state.lang},profitAndLoss:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;return this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber),t+e},totalQuanyi:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;return this.contractWalletInfo.usdtSellPrice>0&&(e=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber),t+e+this.contractWalletInfo.usdtBalance+this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount},assetRate:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;var t=this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return this.totalQuanyi>0?t/this.totalQuanyi:0},avaOpenBuy:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;if("FIXED"==this.contractWalletInfo.usdtPattern)return parseInt(this.buyLeverage*this.contractWalletInfo.usdtBalance/(this.contractCoinInfo.shareNumber*this.currentCoin.price));var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price-this.contractWalletInfo.usdtBuyPrice)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;this.contractWalletInfo.usdtSellPrice>0&&(e=(this.contractWalletInfo.usdtSellPrice-this.currentCoin.price)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber);var s=t+e+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return s>=0?parseInt(this.buyLeverage*this.contractWalletInfo.usdtBalance/(this.contractCoinInfo.shareNumber*this.currentCoin.price)):parseInt(this.buyLeverage*(this.contractWalletInfo.usdtBalance+s)/(this.contractCoinInfo.shareNumber*this.currentCoin.price))},avaOpenSell:function(){if(!this.isLogin||null==this.contractWalletInfo)return 0;if("FIXED"==this.contractWalletInfo.usdtPattern)return parseInt(this.sellLeverage*this.contractWalletInfo.usdtBalance/(this.contractCoinInfo.shareNumber*this.currentCoin.price));var t=0;this.contractWalletInfo.usdtBuyPrice>0&&(t=(this.currentCoin.price-this.contractWalletInfo.usdtBuyPrice)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber);var e=0;this.contractWalletInfo.usdtSellPrice>0&&(e=(this.contractWalletInfo.usdtSellPrice-this.currentCoin.price)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber);var s=t+e+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount;return s>=0?parseInt(this.sellLeverage*this.contractWalletInfo.usdtBalance/(this.contractCoinInfo.shareNumber*this.currentCoin.price)):parseInt(this.sellLeverage*(this.contractWalletInfo.usdtBalance-s)/(this.contractCoinInfo.shareNumber*this.currentCoin.price))},positionList:function(){if(0!=this.contractWalletInfo.id&&0!=this.currentPositionList.length){var t=0;(this.contractWalletInfo.usdtBuyPosition>0||this.contractWalletInfo.usdtFrozenBuyPosition>0)&&(t=(this.currentCoin.price-this.contractWalletInfo.usdtBuyPrice)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber,this.$set(this.currentPositionList[0],"direction","Buy"),this.$set(this.currentPositionList[0],"openPrice",this.contractWalletInfo.usdtBuyPrice),this.$set(this.currentPositionList[0],"pl",t),this.$set(this.currentPositionList[0],"position",this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition),this.$set(this.currentPositionList[0],"avaPosition",this.contractWalletInfo.usdtBuyPosition),this.$set(this.currentPositionList[0],"margin",this.contractWalletInfo.usdtBuyPrincipalAmount),this.$set(this.currentPositionList[0],"leverage",this.contractWalletInfo.usdtBuyLeverage),this.$set(this.currentPositionList[0],"plRatio",t/this.contractWalletInfo.usdtBuyPrincipalAmount),this.$set(this.currentPositionList[0],"mRatio",(t+this.contractWalletInfo.usdtBuyPrincipalAmount)/this.contractWalletInfo.usdtBuyPrincipalAmount/this.contractWalletInfo.usdtBuyLeverage),this.$set(this.currentPositionList[0],"cmRatio",this.contractCoinInfo.maintenanceMarginRate),"FIXED"==this.contractWalletInfo.usdtPattern&&t+this.contractWalletInfo.usdtBuyPrincipalAmount<0&&this.checkBuyCount<5&&(this.getMemberContractWallet(),this.checkBuyCount++));var e=0;if(this.contractWalletInfo.usdtSellPosition>0||this.contractWalletInfo.usdtFrozenSellPosition>0){e=(this.contractWalletInfo.usdtSellPrice-this.currentCoin.price)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber;var s=0;this.currentPositionList.length>1&&(s=1),this.$set(this.currentPositionList[s],"direction","Sell"),this.$set(this.currentPositionList[s],"openPrice",this.contractWalletInfo.usdtSellPrice),this.$set(this.currentPositionList[s],"pl",e),this.$set(this.currentPositionList[s],"position",this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition),this.$set(this.currentPositionList[s],"avaPosition",this.contractWalletInfo.usdtSellPosition),this.$set(this.currentPositionList[s],"margin",this.contractWalletInfo.usdtSellPrincipalAmount),this.$set(this.currentPositionList[s],"leverage",this.contractWalletInfo.usdtSellLeverage),this.$set(this.currentPositionList[s],"plRatio",e/this.contractWalletInfo.usdtSellPrincipalAmount),this.$set(this.currentPositionList[s],"mRatio",(e+this.contractWalletInfo.usdtSellPrincipalAmount)/this.contractWalletInfo.usdtSellPrincipalAmount/this.contractWalletInfo.usdtSellLeverage),this.$set(this.currentPositionList[s],"cmRatio",this.contractCoinInfo.maintenanceMarginRate),"FIXED"==this.contractWalletInfo.usdtPattern&&e+this.contractWalletInfo.usdtSellPrincipalAmount<=0&&this.checkSellCount<5&&(this.getMemberContractWallet(),this.checkSellCount++)}return"CROSSED"==this.contractWalletInfo.usdtPattern&&t+e+this.contractWalletInfo.usdtBalance+this.contractWalletInfo.usdtFrozenBalance+this.contractWalletInfo.usdtBuyPrincipalAmount+this.contractWalletInfo.usdtSellPrincipalAmount<0&&this.checkAllCount<5&&(this.getMemberContractWallet(),this.checkAllCount++),this.currentPositionList}}},watch:{lang:function(){this.updateLangData()},$route(t,e){this.init()}},created:function(){this.init()},filters:{dateFormat:function(t){return h(t).format("MM-DD HH:mm")},fixed2:function(t){return t.toFixed(2)},fixed4:function(t){return t.toFixed(4)},percent:function(t){return(100*t).toFixed(2)}},methods:{seachInputChange(){this.searchKey=this.searchKey.toUpperCase(),this.dataIndex=this.coins.USDT.filter(t=>0==t.coin.indexOf(this.searchKey))},silderGo(t,e){this[t]=e},init(){var t=this.$route.params.pair;void 0==t&&(this.$router.push("/swap/"+this.defaultPath),t=this.defaultPath);const e=t.split("_")[1];e&&(this.basecion=e);var s=t.toUpperCase().split("_")[0],i=t.toUpperCase().split("_")[1];this.currentCoin.symbol=s+"/"+i,this.currentCoin.coin=s,this.currentCoin.base=i,this.$store.commit("navigate","nav-swap"),this.$store.commit("setSkin",this.skin),this.currentPositionList=new Array,this.getCNYRate(),this.getSymbolInfo(),this.getSymbolThumb(),this.getPlate(),this.getPlateFull(),this.sliderOpenPercent=0,this.sliderClosePercent=0},tipFormat:t=>t+"%",changeBaseCion(t){this.basecion=t,this.dataIndex=this.coins.USDT},changePlate(t){this.plate.maxPostion="all"!=t?20:10,this.getPlate(t)},changeImgTable(t){this.currentImgTable=t},changeOrder(t){this.selectedOrder=t},entrustChange(t){this.entrustType=t},setback(){var t=document.getElementsByClassName("container")[0],e=0,s=document;window.innerHeight&&(e=window.innerHeight),!window.innerHeight&&s.body.clientHeight&&(e=s.body.clientHeight),!window.innerHeight&&!s.body.clientHeight&&s.documentElement.clientHeight&&(e=s.documentElement.clientHeight),t.style.minHeight=e-100+"px"},updateLangData(){this.coins.columns[0].title=this.$t("swap.coin"),this.coins.columns[1].title=this.$t("swap.lastprice"),this.coins.columns[2].title=this.$t("swap.daychange"),this.trade.columns[0].title=this.$t("swap.num"),this.trade.columns[1].title=this.$t("swap.price"),this.trade.columns[2].title=this.$t("swap.time"),this.plate.columns[0].title=this.$t("swap.stall"),this.plate.columns[1].title=this.$t("swap.price"),this.plate.columns[2].title=this.$t("swap.num"),this.plate.columns[3].title=this.$t("swap.total"),this.currentOrder.columns[1].title=this.$t("swap.time"),this.currentOrder.columns[2].title=this.$t("swap.symbol"),this.currentOrder.columns[3].title=this.$t("swap.type"),this.currentOrder.columns[4].title=this.$t("swap.direction"),this.currentOrder.columns[5].title=this.$t("swap.price"),this.currentOrder.columns[6].title=this.$t("swap.num"),this.currentOrder.columns[7].title=this.$t("swap.traded"),this.currentOrder.columns[8].title=this.$t("swap.dealamount"),this.currentOrder.columns[9].title=this.$t("swap.action"),this.historyOrder.columns[1].title=this.$t("swap.time"),this.historyOrder.columns[2].title=this.$t("swap.symbol"),this.historyOrder.columns[3].title=this.$t("swap.type"),this.historyOrder.columns[4].title=this.$t("swap.direction"),this.historyOrder.columns[5].title=this.$t("swap.price"),this.historyOrder.columns[6].title=this.$t("swap.num"),this.historyOrder.columns[7].title=this.$t("swap.done"),this.historyOrder.columns[8].title=this.$t("swap.dealamount"),this.historyOrder.columns[9].title=this.$t("swap.status")},getCNYRate(){this.$http.post(this.host+"/market/exchange-rate/usd-cny").then(t=>{var e=t.body;this.CNYRate=e.data})},getCoin(t){return this.coins._map[t]},getKline(){let t={autosize:!0,height:400,fullscreen:!0,symbol:this.symbol,interval:"5",timezone:this.getTimezone4K(),toolbar_bg:"#192330",container_id:"kline_container",datafeed:this.datafeed,library_path:"/assets/charting_library/",locale:this.getLang4K(),debug:!1,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},disabled_features:["header_resolutions","timeframes_toolbar","header_symbol_search","header_chart_type","header_compare","header_undo_redo","header_screenshot","header_saveload","volume_force_overlay","widget_logo","compare_symbol","display_market_status","go_to_date","header_interval_dialog_button","legend_context_menu","show_hide_button_in_legend","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:["disable_resolution_rebuild","keep_left_toolbar_visible_on_small_screens","hide_last_na_study_output","move_logo_to_main_pane","dont_show_boolean_study_arguments","use_localstorage_for_settings","remove_library_container_border","save_chart_properties_to_local_storage","side_toolbar_in_fullscreen_mode","constraint_dialogs_movement","hide_left_toolbar_by_default","left_toolbar","same_data_requery","header_in_fullscreen_mode"],studies_overrides:{"volume.volume.color.0":"#fa5252","volume.volume.color.1":"#12b886","volume.volume.transparency":25},custom_css_url:"bundles/common.css",supported_resolutions:["1","5","15","30","60","4H","1D","1W","1M"],charts_storage_url:"http://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",overrides:{"paneProperties.background":"#192330","paneProperties.vertGridProperties.color":"rgba(0,0,0,.1)","paneProperties.horzGridProperties.color":"rgba(0,0,0,.1)","scalesProperties.textColor":"#61688A","mainSeriesProperties.candleStyle.upColor":"#00b275","mainSeriesProperties.candleStyle.downColor":"#f15057","mainSeriesProperties.candleStyle.drawBorder":!1,"mainSeriesProperties.candleStyle.wickUpColor":"#589065","mainSeriesProperties.candleStyle.wickDownColor":"#AE4E54","paneProperties.legendProperties.showLegend":!1,"mainSeriesProperties.areaStyle.color1":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.color2":"rgba(71, 78, 112, 0.5)","mainSeriesProperties.areaStyle.linecolor":"#9194a4",volumePaneSize:"small"},time_frames:[{text:"1min",resolution:"1",description:"realtime",title:this.$t("swap.realtime")},{text:"1min",resolution:"1",description:"1min"},{text:"5min",resolution:"5",description:"5min"},{text:"15min",resolution:"15",description:"15min"},{text:"30min",resolution:"30",description:"30min"},{text:"1hour",resolution:"60",description:"1hour",title:"1hour"},{text:"4hour",resolution:"240",description:"4hour",title:"4hour"},{text:"1day",resolution:"1D",description:"1day",title:"1day"},{text:"1week",resolution:"1W",description:"1week",title:"1week"},{text:"1mon",resolution:"1M",description:"1mon"}]};"day"===this.skin&&(t.toolbar_bg="#fff",t.custom_css_url="bundles/common_day.css",t.overrides["paneProperties.background"]="#fff",t.overrides["mainSeriesProperties.candleStyle.upColor"]="#a6d3a5",t.overrides["mainSeriesProperties.candleStyle.downColor"]="#ffa5a6"),s.e(62).then(function(){var e=[s("s2Hi")];(function(e){var s=window.tvWidget=new TradingView.widget(t);s.onChartReady(function(){s.chart().executeActionById("drawingToolbarAction"),s.chart().createStudy("Moving Average",!1,!1,[5],null,{"plot.color":"#EDEDED"}),s.chart().createStudy("Moving Average",!1,!1,[10],null,{"plot.color":"#ffe000"}),s.chart().createStudy("Moving Average",!1,!1,[30],null,{"plot.color":"#ce00ff"}),s.chart().createStudy("Moving Average",!1,!1,[60],null,{"plot.color":"#00adff"}),s.createButton().attr("title","realtime").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(3),s.setSymbol("","1"))}).append("<span>Time</span>"),s.createButton().attr("title","M1").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1"))}).append("<span>M1</span>"),s.createButton().attr("title","M5").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","5"))}).append("<span>M5</span>").addClass("selected"),s.createButton().attr("title","M15").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","15"))}).append("<span>M15</span>"),s.createButton().attr("title","M30").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","30"))}).append("<span>M30</span>"),s.createButton().attr("title","H1").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","60"))}).append("<span>H1</span>"),s.createButton().attr("title","H4").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","240"))}).append("<span>H4</span>"),s.createButton().attr("title","D1").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1D"))}).append("<span>D1</span>"),s.createButton().attr("title","W1").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1W"))}).append("<span>W1</span>"),s.createButton().attr("title","M1").on("click",function(){c()(this).hasClass("selected")||(c()(this).addClass("selected").parent(".group").siblings(".group").find(".button.selected").removeClass("selected"),s.chart().setChartType(1),s.setSymbol("","1M"))}).append("<span>M1</span>")})}).apply(null,e)}).catch(s.oe)},getSymbolThumb(){this.$http.post(this.host+this.api.swap.thumb,{}).then(t=>{for(var e=t.body,i=0;i<e.length;i++){(r=e[i]).base=e[i].symbol.split("/")[1],this.coins[r.base]=[],this.coins[r.base+"2"]=[],this.coins._map=[]}for(i=0;i<e.length;i++){var r;(r=e[i]).price=e[i].close=e[i].close.toFixed(this.baseCoinScale),r.rose=e[i].chg>0?"+"+(100*e[i].chg).toFixed(2)+"%":(100*e[i].chg).toFixed(2)+"%",r.coin=e[i].symbol.split("/")[0],r.base=e[i].symbol.split("/")[1],r.href=(r.coin+"_"+r.base).toLowerCase(),r.isFavor=!1,this.coins._map[r.symbol]=r,0==r.zone?this.coins[r.base].push(r):this.coins[r.base+"2"].push(r),r.symbol==this.currentCoin.symbol&&(this.currentCoin=r,this.form.entrustPrice=r.price)}s.e(63).then(function(){var t=[s("BWkg")];(function(t){t.clickScTab()}).apply(null,t)}).catch(s.oe),this.startWebsock(),this.changeBaseCion(this.basecion)})},getSymbolInfo(){this.$http.post(this.host+this.api.swap.symbolInfo,{symbol:this.currentCoin.symbol}).then(t=>{var e=t.body;null!=e&&(this.currentCoin.coinScale=e.coinScale,this.currentCoin.baseCoinScale=e.baseCoinScale,this.baseCoinScale=e.baseCoinScale,this.coinScale=e.coinScale,this.symbolFee=e.fee,this.enableMarketBuy=e.enableMarketBuy,this.enableMarketSell=e.enableMarketSell,this.exchangeable=e.exchangeable,this.contractCoinInfo=e,1==this.contractCoinInfo.leverageType&&(this.leverageList=this.contractCoinInfo.leverage.split(",")),this.isLogin&&this.getMemberContractWallet())})},getMemberContractWallet(){this.$http.post(this.host+this.api.swap.contractWallet,{contractCoinId:this.contractCoinInfo.id}).then(t=>{var e=t.body;if(null!=e){if(this.contractWalletInfo=e.data,null==this.contractWalletInfo)return;"FIXED"==this.contractWalletInfo.usdtPattern?this.marginMode="1":this.marginMode="0",this.buyLeverage=this.contractWalletInfo.usdtBuyLeverage+"",this.sellLeverage=this.contractWalletInfo.usdtSellLeverage+"";var s=this.contractCoinInfo.leverage.split(",");if(Number(this.buyLeverage)<Number(s[0])&&(this.buyLeverage=s[0]),Number(this.sellLeverage)<Number(s[0])&&(this.sellLeverage=s[0]),Number(this.buyLeverage)>Number(s[s.length-1])&&(this.buyLeverage=s[s.length-1]),Number(this.sellLeverage)>Number(s[s.length-1])&&(this.sellLeverage=s[s.length-1]),this.contractWalletInfo.usdtBuyPosition>0||this.contractWalletInfo.usdtFrozenBuyPosition>0){var i=(this.currentCoin.price/this.contractWalletInfo.usdtBuyPrice-1)*(this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition)*this.contractWalletInfo.usdtShareNumber,r={direction:"Buy",openPrice:this.contractWalletInfo.usdtBuyPrice,pl:i,position:this.contractWalletInfo.usdtBuyPosition+this.contractWalletInfo.usdtFrozenBuyPosition,avaPosition:this.contractWalletInfo.usdtBuyPosition,margin:this.contractWalletInfo.usdtBuyPrincipalAmount,leverage:this.contractWalletInfo.usdtBuyLeverage,plRatio:i/this.contractWalletInfo.usdtBuyPrincipalAmount,mRatio:(i+this.contractWalletInfo.usdtBuyPrincipalAmount)/this.contractWalletInfo.usdtBuyPrincipalAmount/this.contractWalletInfo.usdtBuyLeverage,cmRatio:this.contractCoinInfo.maintenanceMarginRate};this.currentPositionList.splice(1),this.$set(this.currentPositionList,0,r)}else this.currentPositionList.splice(0,1);if(this.contractWalletInfo.usdtSellPosition>0||this.contractWalletInfo.usdtFrozenSellPosition>0){var a=(1-this.currentCoin.price/this.contractWalletInfo.usdtSellPrice)*(this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition)*this.contractWalletInfo.usdtShareNumber;r={direction:"Sell",openPrice:this.contractWalletInfo.usdtSellPrice,pl:a,position:this.contractWalletInfo.usdtSellPosition+this.contractWalletInfo.usdtFrozenSellPosition,avaPosition:this.contractWalletInfo.usdtSellPosition,margin:this.contractWalletInfo.usdtSellPrincipalAmount,leverage:this.contractWalletInfo.usdtSellLeverage,plRatio:this.contractWalletInfo.usdtTotalProfitAndLoss/this.contractWalletInfo.usdtSellPrincipalAmount,mRatio:(a+this.contractWalletInfo.usdtSellPrincipalAmount)/this.contractWalletInfo.usdtSellPrincipalAmount/this.contractWalletInfo.usdtSellLeverage,cmRatio:this.contractCoinInfo.maintenanceMarginRate};1==this.currentPositionList.length?this.$set(this.currentPositionList,1,r):this.$set(this.currentPositionList,0,r)}else this.currentPositionList.splice(1,1);this.getCurrentEntrustOrders(),this.getHistoryEntrustOrders()}})},getPlate(t=""){var e={};e.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.swap.platemini,e).then(e=>{this.plate.askRows=[],this.plate.bidRows=[];let s=e.body;if(s.ask&&s.ask.items){for(var i=0;i<s.ask.items.length;i++)s.ask.items[i].totalAmount=0==i?s.ask.items[i].amount:s.ask.items[i-1].totalAmount+s.ask.items[i].amount;if(s.ask.items.length>=this.plate.maxPostion){for(i=this.plate.maxPostion;i>0;i--){(r=s.ask.items[i-1]).direction="SELL",r.position=i,this.plate.askRows.push(r)}const t=this.plate.askRows,e=(t.length,t[0].totalAmount);this.plate.askTotle=e}else{for(i=this.plate.maxPostion;i>s.ask.items.length;i--){(r={price:0,amount:0,direction:"SELL"}).position=i,r.totalAmount=r.amount,this.plate.askRows.push(r)}for(i=s.ask.items.length;i>0;i--){var r;(r=s.ask.items[i-1]).direction="SELL",r.position=i,this.plate.askRows.push(r)}var a=s.ask.items.length-1>0?s.ask.items.length-1:0;const t=this.plate.askRows,e=(t.length,t[a].totalAmount);this.plate.askTotle=e}}if(s.bid&&s.bid.items){for(i=0;i<s.bid.items.length;i++)s.bid.items[i].totalAmount=0==i?s.bid.items[i].amount:s.bid.items[i-1].totalAmount+s.bid.items[i].amount;for(i=0;i<s.bid.items.length;i++){if((n=s.bid.items[i]).direction="BUY",n.position=i+1,this.plate.bidRows.push(n),i==this.plate.maxPostion-1)break}if(s.bid.items.length<this.plate.maxPostion){for(i=s.bid.items.length;i<this.plate.maxPostion;i++){var n;(n={price:0,amount:0,direction:"BUY"}).position=i+1,n.totalAmount=0,this.plate.bidRows.push(n)}var o=s.bid.items.length-1>0?s.bid.items.length-1:0;const t=this.plate.bidRows,e=(t.length,t[o].totalAmount);this.plate.bidTotle=e}else{const t=this.plate.bidRows,e=t[t.length-1].totalAmount;this.plate.bidTotle=e}}""!=t&&(this.selectedPlate=t)})},getPlateFull(){var t={};t.symbol=this.currentCoin.symbol,this.$http.post(this.host+this.api.swap.platefull,t).then(t=>{var e=t.body;this.fullTrade=e,e.skin=this.skin,this.$refs.depthGraph.draw(e)})},getTrade(){var t={};t.symbol=this.currentCoin.symbol,t.size=20,this.$http.post(this.host+this.api.swap.trade,t).then(t=>{this.trade.rows=[];for(var e=t.body,s=0;s<e.length;s++)this.trade.rows.push(e[s])})},successCallback(t,e){t.datafeed=new n(t.host+"/swap",t.currentCoin,e,t.baseCoinScale),t.getKline(),e.subscribe("/topic/swap/thumb",function(e){var s=JSON.parse(e.body),i=t.getCoin(s.symbol);null!=i&&(i.price=s.close,i.rose=s.chg>0?"+"+(100*s.chg).toFixed(2)+"%":(100*s.chg).toFixed(2)+"%",i.close=s.close,i.high=s.high,i.low=s.low,i.turnover=parseInt(s.volume),i.volume=s.volume,i.usdRate=s.usdRate)}),e.subscribe("/topic/swap/trade/"+t.currentCoin.symbol,function(e){var s=JSON.parse(e.body);if(s.length>0)for(var i=0;i<s.length;i++)t.trade.rows.unshift(s[i]);t.trade.rows.length>30&&(t.trade.rows=t.trade.rows.slice(0,30))}),t.isLogin,e.subscribe("/topic/swap/trade-plate/"+t.currentCoin.symbol,function(e){var s=JSON.parse(e.body);if("SELL"==s.direction){var i=s.items;t.plate.askRows=[];let e=0;for(var r=t.plate.maxPostion-1;r>=0;r--){var a={};r<i.length?a=i[r]:(a.price=0,a.amount=0),a.direction="SELL",a.position=r+1,t.plate.askRows.push(a)}for(r=t.plate.askRows.length-1;r>=0;r--)r==t.plate.askRows.length-1||0==t.plate.askRows[r].price?t.plate.askRows[r].totalAmount=t.plate.askRows[r].amount:t.plate.askRows[r].totalAmount=t.plate.askRows[r+1].totalAmount+t.plate.askRows[r].amount,e+=t.plate.askRows[r].amount;t.plate.askTotle=e}else{var n=s.items;t.plate.bidRows=[];let e=0;for(r=0;r<t.plate.maxPostion;r++){var o={};r<n.length?o=n[r]:(o.price=0,o.amount=0),o.direction="BUY",o.position=r+1,t.plate.bidRows.push(o)}for(r=0;r<t.plate.bidRows.length;r++)0==r||0==t.plate.bidRows[r].amount?t.plate.bidRows[r].totalAmount=t.plate.bidRows[r].amount:t.plate.bidRows[r].totalAmount=t.plate.bidRows[r-1].totalAmount+t.plate.bidRows[r].amount,e+=t.plate.bidRows[r].amount;t.plate.bidTotle=e}"s"==t.currentImgTable&&t.getPlateFull()})},startWebsock(){this.stompClient&&(console.log("opening...."),this.stompClient.ws.close());var t=null,e=this,s=new p(e.host+e.api.swap.ws);t=u.over(s),this.stompClient=t,t.debug=!1,t.connect({},function(s){e.successCallback(e,t)},()=>{this.stompClient||(console.log("not open...."),e.reconnect(e))})},reconnect(t){console.info("in reconnect function");let e=!1;const s=setInterval(()=>{console.info("in interval"+Math.random()),t.stompClient&&(console.log("reconnect opening....."),clearInterval(s),e=!0);var i=null,r=new p(t.host+t.api.swap.ws);i=u.over(r),t.stompClient=i,i.debug=!1,i.connect({},r=>{console.info("reconnected success"),clearInterval(s),e=!0,t.successCallback(t,i)},()=>{console.info("reconnect failed"),console.info("connected:"+e),e&&console.info("connect .... what?"),t.reconnect(t)})},2e3)},open_order(){this.showMarket=!1},close_order(){this.showMarket=!0},gohref(t,e){this.$router.push({name:"SwapPair",params:{pair:t.href}})},buyPlate(t){this.form.entrustPrice=t.price},sellPlate(t){this.form.entrustPrice=t.price},cancel(t){var e=this;this.$Modal.confirm({title:"撤单提示",content:this.$t("swap.undotip"),onOk:()=>{let s={entrustId:t};this.$http.post(this.host+this.api.swap.cancel,s).then(t=>{var s=t.body;0==s.code?(this.$Notice.success({title:this.$t("swap.tip"),desc:this.$t("swap.cancelsuccess")}),setTimeout(function(){e.getMemberContractWallet()},1e3)):this.$Notice.error({title:this.$t("swap.tip"),desc:s.message})})}})},showMarginModeModal(){this.isLogin&&(this.marginModeModal=!0)},changeMarginMode(t){if(!this.isLogin)return;let e={contractCoinId:this.contractCoinInfo.id,targetPattern:Number(t)};this.$http.post(this.host+this.api.swap.switchPattern,e).then(t=>{var e=t.body;0==e.code?(this.$Message.success(this.$t("swap.marginModeSuccessTip")),this.getMemberContractWallet()):this.$Message.error(e.message)})},showAdjustLeverage(t){if(this.isLogin){this.leverageModal=!0,this.leverageType=this.contractCoinInfo.leverageType,this.leverageAdjustVal=1==t?Number(this.contractWalletInfo.usdtBuyLeverage):Number(this.contractWalletInfo.usdtSellLeverage);var e=this.contractCoinInfo.leverage.split(",");this.leverageAdjustVal<e[0]&&(this.leverageAdjustVal=Number(e[0])),this.leverageAdjustVal>e[e.length-1]&&(this.leverageAdjustVal=Number(e[e.length-1])),this.changeLeverageType=t}},changeLeverage(t){this.changeLeverageType,this.leverageAdjustVal=t},changeEntrustOrderType(t){"2"==t?(this.form.trigglePrice="",this.form.entrustPrice="",this.form.volume=""):"0"==t&&(this.form.entrustPrice=this.currentCoin.price,this.form.volume="")},onLeverageChange(t){this.isLogin&&(this.leverageAdjustVal=t)},adjustLeverage(){if(!this.isLogin)return;var t=this.contractCoinInfo.leverage.split(",");if(this.leverageAdjustVal<Number(t[0]))return this.leverageAdjustVal=Number(t[0]),void this.$Message.error(this.$t("swap.levmintip"));if(this.leverageAdjustVal>Number(t[t.length-1]))return this.leverageAdjustVal=Number(t[t.length-1]),void this.$Message.error(this.$t("swap.levmaxtip"));if(1==this.changeLeverageType&&this.buyLeverage==this.leverageAdjustVal)return void(this.leverageModal=!1);if(2==this.changeLeverageType&&this.sellLeverage==this.leverageAdjustVal)return void(this.leverageModal=!1);this.$Spin.show();var e=this;let s=!1,i={contractCoinId:this.contractCoinInfo.id,leverage:this.leverageAdjustVal,direction:1==this.changeLeverageType?0:1};this.$http.post(this.host+this.api.swap.modifyLeverage,i).then(t=>{var i=t.body;0==i.code?(this.$Notice.success({title:e.$t("swap.tip"),desc:e.$t("swap.success")}),s=!0,this.getMemberContractWallet()):this.$Notice.error({title:e.$t("swap.tip"),desc:i.message}),this.$Spin.hide(),s&&(1==this.changeLeverageType?this.buyLeverage=this.leverageAdjustVal:this.sellLeverage=this.leverageAdjustVal,this.leverageModal=!1)})},onOpenAmountFocus(){this.sliderOpenPercent=0},onChangeOpenPercent(t){this.sliderOpenPercent=t},onCloseAmountFocus(){this.sliderClosePercent=0},onChangeClosePercent(t){this.sliderClosePercent=t},onOpen(t){if(!this.isLogin)return;var e=0;this.sliderOpenPercent>0?(e=0==t?parseInt(this.avaOpenBuy*this.sliderOpenPercent/100):parseInt(this.avaOpenSell*this.sliderOpenPercent/100))<1&&(e=1):e=parseInt(this.form.volume),""!=this.form.triggerPrice&&void 0!=this.form.triggerPrice||(this.form.triggerPrice=0);var s=parseInt(this.entrustOrderType);if(2==s&&this.form.triggerPrice<=0)return void this.$Message.error(this.$t("swap.triggerpriceshouldbigger"));let i={type:s,direction:t,contractCoinId:this.contractCoinInfo.id,triggerPrice:Number(this.form.triggerPrice),entrustPrice:""==this.form.entrustPrice?0:Number(this.form.entrustPrice),leverage:0==t?Number(this.buyLeverage):Number(this.sellLeverage),volume:e};if(i.volume<=0)this.$Message.error(this.$t("swap.pleaseinputopenvolume"));else{if(/^\+?[1-9][0-9]*$/.test(i.volume)){if(0==t){if(i.volume>this.avaOpenBuy&&3!=i.type)return void this.$Message.error(this.$t("swap.noenoughbalance"))}else if(i.volume>this.avaOpenSell&&3!=i.type)return void this.$Message.error(this.$t("swap.noenoughbalance"));if(1!=this.entrustOrderType||""!=this.form.entrustPrice&&0!=this.form.entrustPrice){this.$Spin.show();var r=this;this.$http.post(this.host+this.api.swap.open,i).then(t=>{var e=t.body;0==e.code?(this.$Notice.success({title:r.$t("swap.tip"),desc:r.$t("swap.success")}),setTimeout(function(){r.getMemberContractWallet()},1e3)):this.$Notice.error({title:r.$t("swap.tip"),desc:e.message}),this.$Spin.hide()})}else this.$Message.error(this.$t("swap.pleaseinputrightentrustprice"))}else this.$Message.error(this.$t("swap.pleaseinputcorrectopenvolume"))}},onClose(t){if(!this.isLogin)return;var e=0;if(this.sliderClosePercent>0?(e=0==t?parseInt(this.contractWalletInfo.usdtSellPosition*this.sliderClosePercent/100):parseInt(this.contractWalletInfo.usdtBuyPosition*this.sliderClosePercent/100))<1&&(e=1):e=parseInt(this.form.volume),""!=this.form.triggerPrice&&void 0!=this.form.triggerPrice||(this.form.triggerPrice=0),2==parseInt(this.entrustOrderType)&&this.form.triggerPrice<=0)return void this.$Message.error(this.$t("swap.triggerpriceshouldbigger"));let s={type:this.entrustOrderType,direction:t,contractCoinId:this.contractCoinInfo.id,triggerPrice:Number(this.form.triggerPrice),entrustPrice:""==this.form.entrustPrice?0:Number(this.form.entrustPrice),volume:e};if(s.volume<=0)this.$Message.error(this.$t("swap.pleaseinputclosevolume"));else{if(/^\+?[1-9][0-9]*$/.test(s.volume)){if(0==t){if(s.volume>this.contractWalletInfo.usdtSellPosition&&3!=s.type)return void this.$Message.error(this.$t("swap.noenoughposition"))}else if(s.volume>this.contractWalletInfo.usdtBuyPosition&&3!=s.type)return void this.$Message.error(this.$t("swap.noenoughposition"));if(1!=this.entrustOrderType||""!=this.form.entrustPrice&&0!=this.form.entrustPrice){this.$Spin.show();var i=this;this.$http.post(this.host+this.api.swap.close,s).then(t=>{var e=t.body;0==e.code?(this.$Notice.success({title:i.$t("swap.tip"),desc:i.$t("swap.success")}),setTimeout(function(){i.getMemberContractWallet()},1e3)):this.$Notice.error({title:i.$t("swap.tip"),desc:e.message}),this.$Spin.hide()})}else this.$Message.error(this.$t("swap.pleaseinputrightentrustprice"))}else this.$Message.error(this.$t("swap.pleaseinputcorrectclosevolume"))}},getCurrentEntrustOrders(){if(!this.isLogin)return;var t=this;let e={contractCoinId:this.contractCoinInfo.id,pageNo:1,pageSize:50};this.$http.post(this.host+this.api.swap.getEntrustList,e).then(e=>{var s=e.body;s.content.length>0?(this.currentEntrustOrderList.splice(0),s.content.forEach(function(e){t.currentEntrustOrderList.push(e)})):this.currentEntrustOrderList.splice(0)})},getHistoryEntrustOrders(){if(!this.isLogin)return;var t=this;let e={contractCoinId:this.contractCoinInfo.id,pageNo:1,pageSize:50};this.$http.post(this.host+this.api.swap.getHistoryEntrustList,e).then(e=>{var s=e.body;s.content.length>0?(this.historyEntrustOrderList.splice(0),s.content.forEach(function(e){t.historyEntrustOrderList.push(e)})):this.historyEntrustOrderList.splice(0)})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container swap",class:t.skin},[s("div",{staticClass:"main"},[s("div",{staticStyle:{display:"flex",flex:"0 0 70%","flex-wrap":"wrap","justify-content":"space-between"}},[s("div",{staticClass:"right"},[s("div",{staticClass:"coin-menu"},[s("div",{staticStyle:{padding:"8px 10px",height:"48px"}},[s("Input",{attrs:{search:"",placeholder:t.$t("common.searchplaceholderswap")},on:{"on-change":t.seachInputChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),t._v(" "),s("div",{staticClass:"sc_filter",staticStyle:{display:"none"}},[s("span",{class:{active:"usdt"===t.basecion},on:{click:function(e){t.changeBaseCion("usdt")}}},[t._v("USDT")])]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"usdt"===t.basecion,expression:"basecion==='usdt'"}],attrs:{height:"463","highlight-row":"",id:"USDT",columns:t.coins.columns,data:t.dataIndex},on:{"on-current-change":t.gohref}})],1)]),t._v(" "),s("div",{staticClass:"center"},[s("div",{staticClass:"symbol"},[s("div",{staticClass:"item",staticStyle:{"margin-left":"10px"}},[s("span",{staticClass:"coin"},[t._v(t._s(t.currentCoin.symbol)+" "+t._s(t.$t("swap.swapindex"))+"\n                ")])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.NewPrice")))]),t._v(" "),s("span",{staticClass:"num",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t._f("toFixed")(t.currentCoin.close,4)))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.Change")))]),t._v(" "),s("span",{staticClass:"num",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t.currentCoin.rose))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.high")))]),t._v(" "),s("span",{staticClass:"num "},[t._v(t._s(t._f("toFixed")(t.currentCoin.high,4)))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.low")))]),t._v(" "),s("span",{staticClass:"num "},[t._v(t._s(t._f("toFixed")(t.currentCoin.low,4)))])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"text"},[t._v(t._s(t.$t("service.ExchangeNum")))]),t._v(" "),s("span",{staticClass:"num "},[t._v(t._s(t._f("toFixed")(t.currentCoin.volume,4))+" "+t._s(t.currentCoin.coin))])]),t._v(" "),s("div",{staticClass:"item"})]),t._v(" "),s("div",{staticClass:"imgtable"},[s("div",{staticClass:"handler"},[s("span",{class:{active:"k"===t.currentImgTable},on:{click:function(e){t.changeImgTable("k")}}},[t._v(t._s(t.$t("swap.kline")))]),t._v(" "),s("span",{class:{active:"s"===t.currentImgTable},on:{click:function(e){t.changeImgTable("s")}}},[t._v(t._s(t.$t("swap.depth")))])]),t._v(" "),s("div",{class:{hidden:"s"===t.currentImgTable},attrs:{id:"kline_container"}}),t._v(" "),s("DepthGraph",{ref:"depthGraph",class:{hidden:"k"===t.currentImgTable}})],1)]),t._v(" "),s("div",{staticStyle:{width:"100%","margin-top":"5px",flex:"0 0 100%"}},[s("div",{staticClass:"order",staticStyle:{background:"#999","margin-right":"5px"}},[s("div",{staticClass:"order-handler"},[s("span",{class:{active:"currentPositions"===t.selectedOrder},on:{click:function(e){t.changeOrder("currentPositions")}}},[t._v(t._s(t.$t("swap.currentposition")))]),t._v(" "),s("span",{class:{active:"currentEntrustOrders"===t.selectedOrder},on:{click:function(e){t.changeOrder("currentEntrustOrders")}}},[t._v(t._s(t.$t("swap.curdelegation")))]),t._v(" "),s("span",{class:{active:"historyEntrustOrders"===t.selectedOrder},on:{click:function(e){t.changeOrder("historyEntrustOrders")}}},[t._v(t._s(t.$t("swap.hisdelegation")))])]),t._v(" "),s("div",{staticClass:"table"},["currentPositions"===t.selectedOrder?s("Table",{attrs:{height:"285",columns:t.currentPosition.columns,data:t.positionList,"no-data-text":t.$t("common.nodata")}}):t._e(),t._v(" "),"currentEntrustOrders"===t.selectedOrder?s("Table",{attrs:{height:"285",columns:t.currentOrder.columns,"no-data-text":t.$t("common.nodata"),data:t.currentEntrustOrderList}}):t._e(),t._v(" "),"historyEntrustOrders"===t.selectedOrder?s("Table",{attrs:{height:"285",columns:t.historyOrder.columns,"no-data-text":t.$t("common.nodata"),data:t.historyEntrustOrderList}}):t._e()],1)])])]),t._v(" "),s("div",{staticClass:"left plate-wrap",staticStyle:{position:"relative",flex:"0 0 17%"}},[s("div",{staticClass:"handlers"},[s("span",{staticClass:"handler handler-all",class:{active:"all"==t.selectedPlate},on:{click:function(e){t.changePlate("all")}}}),t._v(" "),s("span",{staticClass:"handler handler-green",class:{active:"buy"==t.selectedPlate},on:{click:function(e){t.changePlate("buy")}}}),t._v(" "),s("span",{staticClass:"handler handler-red",class:{active:"sell"==t.selectedPlate},on:{click:function(e){t.changePlate("sell")}}})]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"buy"!=t.selectedPlate,expression:"selectedPlate!='buy'"}],ref:"currentRowTable",staticClass:"sell_table",attrs:{"highlight-row":"",columns:t.plate.columns,data:t.plate.askRows,"no-data-text":t.$t("common.nodata")},on:{"on-current-change":t.buyPlate}}),t._v(" "),s("div",{staticClass:"plate-nowprice"},[s("span",{staticClass:"price",class:{buy:t.currentCoin.change>0,sell:t.currentCoin.change<0}},[t._v(t._s(t._f("toFixed")(t.currentCoin.price,t.baseCoinScale)))]),t._v(" "),t.currentCoin.change>0?s("span",{staticClass:"buy"},[t._v("↑")]):t.currentCoin.change<0?s("span",{staticClass:"sell"},[t._v("↓")]):t._e()]),t._v(" "),s("Table",{directives:[{name:"show",rawName:"v-show",value:"sell"!=t.selectedPlate,expression:"selectedPlate!='sell'"}],staticClass:"buy_table",class:{hidden:"all"===t.selectedPlate},attrs:{"highlight-row":"",columns:t.plate.columns,data:t.plate.bidRows,"no-data-text":t.$t("common.nodata")},on:{"on-current-change":t.sellPlate}}),t._v(" "),s("div",{staticClass:"order",staticStyle:{"margin-top":"5px","background-color":"#192330",height:"320px"}},[s("div",{staticClass:"order-handler",staticStyle:{"border-bottom":"1px solid rgb(39, 49, 62)"}},[s("span",{class:{active:1===t.entrustType},staticStyle:{width:"50%","text-align":"center"},on:{click:function(e){t.entrustChange(1)}}},[t._v(t._s(t.$t("swap.open")))]),t._v(" "),s("span",{class:{active:2===t.entrustType},staticStyle:{width:"50%","text-align":"center"},on:{click:function(e){t.entrustChange(2)}}},[t._v(t._s(t.$t("swap.close")))])]),t._v(" "),s("div",{staticClass:"table open-close"},[1===t.entrustType?s("div",{staticClass:"open"},[s("RadioGroup",{attrs:{type:"button",size:"default"},on:{"on-change":t.changeEntrustOrderType},model:{value:t.entrustOrderType,callback:function(e){t.entrustOrderType=e},expression:"entrustOrderType"}},[s("Radio",{attrs:{label:"1"}},[t._v(t._s(t.$t("swap.limited_price")))]),t._v(" "),s("Radio",{attrs:{label:"0"}},[t._v(t._s(t.$t("swap.market_price")))]),t._v(" "),s("Radio",{attrs:{label:"2"}},[t._v(t._s(t.$t("swap.spot_price")))])],1),t._v(" "),s("Form",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"10px"}},["1"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{on:{"on-keyup":function(e){t.form.entrustPrice=t.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.entrustPrice,callback:function(e){t.$set(t.form,"entrustPrice",e)},expression:"form.entrustPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"0"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{staticClass:"market-price",attrs:{value:t.$t("swap.marketpriceplaceholder"),disabled:""}})],1):t._e(),t._v(" "),"2"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.triggleprice")))]),t._v(" "),s("Input",{on:{"on-keyup":function(e){t.form.triggerPrice=t.form.triggerPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.triggerPrice,callback:function(e){t.$set(t.form,"triggerPrice",e)},expression:"form.triggerPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"2"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{attrs:{placeholder:t.$t("swap.triggleplaceholder")},on:{"on-keyup":function(e){t.form.entrustPrice=t.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.entrustPrice,callback:function(e){t.$set(t.form,"entrustPrice",e)},expression:"form.entrustPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.openvolume")))]),t._v(" "),0==t.sliderOpenPercent?s("Input",{on:{"on-keyup":function(e){t.form.volume=t.form.volume.replace(/\D/g,"")}},model:{value:t.form.volume,callback:function(e){t.$set(t.form,"volume",e)},expression:"form.volume"}}):t._e(),t._v(" "),0!=t.sliderOpenPercent?s("Input",{staticClass:"market-price",attrs:{readonly:!0,value:t.sliderOpenPercent+" %"},on:{"on-focus":t.onOpenAmountFocus}}):t._e(),t._v(" "),0==t.sliderOpenPercent?s("label",{staticClass:"after"},[t._v(t._s(t.$t("swap.shareNumber")))]):t._e(),t._v(" "),s("span",{staticStyle:{position:"absolute",top:"32px",right:"0px",color:"#7c7f82"}},[t._v("1"+t._s(t.$t("swap.shareNumber"))+" = "+t._s(t.contractCoinInfo.shareNumber)+t._s(t.contractCoinInfo.coinSymbol))])],1),t._v(" "),"2"!=t.entrustOrderType?s("div",{staticClass:"split-panel"},[s("div",{class:{selected:25===Number(t.sliderOpenPercent)},on:{click:function(e){t.onChangeOpenPercent(25)}}},[t._v("25%")]),t._v(" "),s("div",{class:{selected:50===Number(t.sliderOpenPercent)},on:{click:function(e){t.onChangeOpenPercent(50)}}},[t._v("50%")]),t._v(" "),s("div",{class:{selected:75===Number(t.sliderOpenPercent)},on:{click:function(e){t.onChangeOpenPercent(75)}}},[t._v("75%")]),t._v(" "),s("div",{class:{selected:100===Number(t.sliderOpenPercent)},on:{click:function(e){t.onChangeOpenPercent(100)}}},[t._v("100%")])]):t._e()],1),t._v(" "),s("div",{staticClass:"open-tips"},[s("div",[s("span",{staticClass:"green"},[t._v(t._s(t.$t("swap.canup"))+":")]),s("span",{staticClass:"num"},[t._v("≈ "+t._s(t.avaOpenBuy)+" "+t._s(t.$t("swap.shareNumber")))])]),t._v(" "),s("div",[s("span",{staticClass:"red"},[t._v(t._s(t.$t("swap.candown"))+":")]),s("span",{staticClass:"num"},[t._v("≈ "+t._s(t.avaOpenSell)+" "+t._s(t.$t("swap.shareNumber")))])])]),t._v(" "),t.isLogin?s("div",{staticClass:"operate"},[s("Button",{staticClass:"open-up",attrs:{type:"primary",shape:"circle"},on:{click:function(e){t.onOpen(0)}}},[t._v(t._s(t.$t("swap.openup")))]),t._v(" "),s("Button",{staticClass:"open-down",attrs:{type:"primary",shape:"circle"},on:{click:function(e){t.onOpen(1)}}},[t._v(t._s(t.$t("swap.opendown")))])],1):t._e(),t._v(" "),t.isLogin?t._e():s("div",{staticClass:"operate-login",staticStyle:{width:"94%","margin-left":"3%"}},[s("span",{staticStyle:{display:"inline-block",width:"100%","text-align":"center",border:"1px solid #232d3a",padding:"5px 0","border-radius":"5px"}},[t._v("\n                  "+t._s(t.$t("common.please"))+"\n                  "),s("router-link",{attrs:{to:"/login"}},[s("span",{staticStyle:{color:"#f0a70a"}},[t._v(t._s(t.$t("common.login")))])]),t._v(" /\n                  "),s("router-link",{attrs:{to:"/register"}},[s("span",{staticStyle:{color:"#00dcff"}},[t._v(t._s(t.$t("common.register")))])])],1)])],1):s("div",{staticClass:"open"},[s("RadioGroup",{attrs:{type:"button",size:"default"},on:{"on-change":t.changeEntrustOrderType},model:{value:t.entrustOrderType,callback:function(e){t.entrustOrderType=e},expression:"entrustOrderType"}},[s("Radio",{attrs:{label:"1"}},[t._v(t._s(t.$t("swap.limited_price")))]),t._v(" "),s("Radio",{attrs:{label:"0"}},[t._v(t._s(t.$t("swap.market_price")))]),t._v(" "),s("Radio",{attrs:{label:"2"}},[t._v(t._s(t.$t("swap.spot_price")))])],1),t._v(" "),s("Form",{staticStyle:{width:"94%","margin-left":"3%","margin-top":"10px"}},["1"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{on:{"on-keyup":function(e){t.form.entrustPrice=t.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.entrustPrice,callback:function(e){t.$set(t.form,"entrustPrice",e)},expression:"form.entrustPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"0"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{staticClass:"market-price",attrs:{value:t.$t("swap.marketpriceplaceholder"),disabled:""}})],1):t._e(),t._v(" "),"2"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.triggleprice")))]),t._v(" "),s("Input",{on:{"on-keyup":function(e){t.form.trigglePrice=t.form.triggerPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.triggerPrice,callback:function(e){t.$set(t.form,"triggerPrice",e)},expression:"form.triggerPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),"2"==t.entrustOrderType?s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.entrustprice")))]),t._v(" "),s("Input",{attrs:{placeholder:t.$t("swap.triggleplaceholder")},on:{"on-keyup":function(e){t.form.entrustPrice=t.form.entrustPrice.replace(/[^\d^\.]+/g,"")}},model:{value:t.form.entrustPrice,callback:function(e){t.$set(t.form,"entrustPrice",e)},expression:"form.entrustPrice"}}),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.currentCoin.base))])],1):t._e(),t._v(" "),s("FormItem",{staticStyle:{"margin-bottom":"10px"}},[s("label",{staticClass:"before"},[t._v(t._s(t.$t("swap.closevolume")))]),t._v(" "),0==t.sliderClosePercent?s("Input",{on:{"on-keyup":function(e){t.form.volume=t.form.volume.replace(/\D/g,"")}},model:{value:t.form.volume,callback:function(e){t.$set(t.form,"volume",e)},expression:"form.volume"}}):t._e(),t._v(" "),0!=t.sliderClosePercent?s("Input",{staticClass:"market-price",attrs:{readonly:!0},on:{"on-focus":t.onCloseAmountFocus}}):t._e(),t._v(" "),s("label",{staticClass:"after"},[t._v(t._s(t.$t("swap.shareNumber")))]),t._v(" "),s("span",{staticStyle:{position:"absolute",top:"32px",right:"0px",color:"#7c7f82"}},[t._v("1"+t._s(t.$t("swap.shareNumber"))+" = "+t._s(t.contractCoinInfo.shareNumber)+"USDT")])],1),t._v(" "),"2"!=t.entrustOrderType?s("div",{staticClass:"split-panel"},[s("div",{class:{selected:25===Number(t.sliderClosePercent)},on:{click:function(e){t.onChangeClosePercent(25)}}},[t._v("25%")]),t._v(" "),s("div",{class:{selected:50===Number(t.sliderClosePercent)},on:{click:function(e){t.onChangeClosePercent(50)}}},[t._v("50%")]),t._v(" "),s("div",{class:{selected:75===Number(t.sliderClosePercent)},on:{click:function(e){t.onChangeClosePercent(75)}}},[t._v("75%")]),t._v(" "),s("div",{class:{selected:100===Number(t.sliderClosePercent)},on:{click:function(e){t.onChangeClosePercent(100)}}},[t._v("100%")])]):t._e()],1),t._v(" "),s("div",{staticClass:"open-tips"},[s("div",[s("span",{staticClass:"red"},[t._v(t._s(t.$t("swap.canclosedown"))+":")]),s("span",{staticClass:"num"},[t._v(t._s(t.contractWalletInfo.usdtBuyPosition)+" "+t._s(t.$t("swap.shareNumber")))])]),t._v(" "),s("div",[s("span",{staticClass:"green"},[t._v(t._s(t.$t("swap.cancloseup"))+":")]),s("span",{staticClass:"num"},[t._v(t._s(t.contractWalletInfo.usdtSellPosition)+" "+t._s(t.$t("swap.shareNumber")))])])]),t._v(" "),t.isLogin?s("div",{staticClass:"operate"},[s("Button",{staticClass:"open-down",attrs:{type:"primary",shape:"circle"},on:{click:function(e){t.onClose(1)}}},[t._v(t._s(t.$t("swap.closedown")))]),t._v(" "),s("Button",{staticClass:"open-up",attrs:{type:"primary",shape:"circle"},on:{click:function(e){t.onClose(0)}}},[t._v(t._s(t.$t("swap.closeup")))])],1):t._e(),t._v(" "),t.isLogin?t._e():s("div",{staticClass:"operate-login",staticStyle:{width:"94%","margin-left":"3%"}},[s("span",{staticStyle:{display:"inline-block",width:"100%","text-align":"center",border:"1px solid #232d3a",padding:"5px 0","border-radius":"5px"}},[t._v("\n                  "+t._s(t.$t("common.please"))+"\n                  "),s("router-link",{attrs:{to:"/login"}},[s("span",{staticStyle:{color:"#f0a70a"}},[t._v(t._s(t.$t("common.login")))])]),t._v(" /\n                  "),s("router-link",{attrs:{to:"/register"}},[s("span",{staticStyle:{color:"#00dcff"}},[t._v(t._s(t.$t("common.register")))])])],1)])],1)])])],1),t._v(" "),s("div",{staticClass:"left plate-wrap",staticStyle:{position:"relative",flex:"0 0 13%"}},[s("div",{staticStyle:{"background-color":"#192330",height:"40px","line-height":"40px","padding-left":"5px",color:"#61688A","font-size":"13px"}},[s("span",[t._v(t._s(t.$t("swap.latestdeal")))])]),t._v(" "),s("div",{staticClass:"trade-wrap"},[s("Table",{attrs:{height:"472",columns:t.trade.columns,data:t.trade.rows,"no-data-text":t.$t("common.nodata")}})],1),t._v(" "),s("div",{staticClass:"order",staticStyle:{"margin-top":"5px","min-height":"320px","background-color":"#192330",color:"#61688A"}},[s("div",{staticStyle:{height:"32px","line-height":"32px","padding-left":"10px","border-bottom":"1px solid #27313e","font-size":"13px"}},[s("span",[t._v(t._s(t.$t("swap.myswapaccount")))]),t._v(" "),s("router-link",{staticClass:"linkmore",attrs:{to:"/uc/swapAssets/"}},[t._v(t._s(t.$t("swap.zijinhuazhuan")))])],1),t._v(" "),s("div",{staticClass:"table swap-my-account"},[s("div",{staticClass:"account-item",staticStyle:{"margin-top":"20px"}},[s("div",{staticStyle:{width:"35%"}},[t._v(t._s(t.$t("swap.accountmode")))]),t._v(" "),s("div",{staticClass:"mode",staticStyle:{width:"65%"}},["1"===t.marginMode?s("Button",{attrs:{size:"small"},on:{click:function(e){t.showMarginModeModal()}}},[t._v(t._s(t.$t("swap.marginMode1")))]):t._e(),t._v(" "),"0"===t.marginMode?s("Button",{attrs:{size:"small"},on:{click:function(e){t.showMarginModeModal()}}},[t._v(t._s(t.$t("swap.marginMode2")))]):t._e()],1)]),t._v(" "),s("div",{staticClass:"account-item",staticStyle:{"margin-top":"20px",height:"42px","padding-bottom":"5px","border-bottom":"1px dashed #27313e"}},[s("div",{staticStyle:{width:"35%"}},[t._v(t._s(t.$t("swap.accountmargin")))]),t._v(" "),s("div",{staticClass:"margin",staticStyle:{width:"65%",display:"flex","justify-content":"space-between"}},[s("Button",{staticStyle:{flex:"0 0 47%",border:"none",background:"#4db872"},attrs:{size:"small"},on:{click:function(e){t.showAdjustLeverage(1)}}},[t._v(t._s(t.buyLeverage)+"X"+t._s(t.$t("swap.up")))]),t._v(" "),s("Button",{staticStyle:{flex:"0 0 47%",border:"none",background:"#ee6560"},attrs:{size:"small"},on:{click:function(e){t.showAdjustLeverage(2)}}},[t._v(t._s(t.sellLeverage)+"X"+t._s(t.$t("swap.down")))])],1)]),t._v(" "),s("div",{staticClass:"account-item",staticStyle:{"margin-top":"10px"}},[s("div",[t._v(t._s(t.$t("swap.accountquanyi")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("fixed4")(t.totalQuanyi)))])])]),t._v(" "),s("div",{staticClass:"account-item"},[s("div",[t._v(t._s(t.$t("swap.profitandloss")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("fixed4")(t.profitAndLoss)))])])]),t._v(" "),s("div",{staticClass:"account-item"},[s("div",[t._v(t._s(t.$t("swap.principalAmount")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("fixed4")(t.contractWalletInfo.usdtBalance)))])])]),t._v(" "),s("div",{staticClass:"account-item"},[s("div",[t._v(t._s(t.$t("swap.positionAmount")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("fixed4")(t.contractWalletInfo.usdtBuyPrincipalAmount+t.contractWalletInfo.usdtSellPrincipalAmount)))])])]),t._v(" "),s("div",{staticClass:"account-item"},[s("div",[t._v(t._s(t.$t("swap.frozenAmount")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("fixed4")(t.contractWalletInfo.usdtFrozenBalance)))])])]),t._v(" "),s("div",{staticClass:"account-item"},[s("div",[t._v(t._s(t.$t("swap.principalRate")))]),t._v(" "),s("div",[s("span",[t._v(t._s(t._f("percent")(t.assetRate))+" %")])])])])])])]),t._v(" "),s("Modal",{attrs:{title:t.$t("swap.modifyMarginModeTitle"),width:"20","class-name":"vertical-center-modal"},model:{value:t.marginModeModal,callback:function(e){t.marginModeModal=e},expression:"marginModeModal"}},[s("div",{staticStyle:{"text-align":"center",width:"100%"}},[s("ButtonGroup",{staticStyle:{width:"80%","text-align":"center"}},["1"===t.marginMode?s("Button",{staticStyle:{width:"50%"},attrs:{type:"primary"}},[t._v(t._s(t.$t("swap.marginMode1")))]):s("Button",{staticStyle:{width:"50%"},on:{click:function(e){t.changeMarginMode("1")}}},[t._v(t._s(t.$t("swap.marginMode1")))]),t._v(" "),"0"===t.marginMode?s("Button",{staticStyle:{width:"50%"},attrs:{type:"primary"}},[t._v(t._s(t.$t("swap.marginMode2")))]):s("Button",{staticStyle:{width:"50%"},on:{click:function(e){t.changeMarginMode("0")}}},[t._v(t._s(t.$t("swap.marginMode2")))])],1)],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"default",size:"large"},on:{click:function(e){t.marginModeModal=!1}}},[t._v(t._s(t.$t("common.close")))])],1)]),t._v(" "),s("Modal",{attrs:{title:t.$t("swap.modifyLeverage"),width:"25","class-name":"vertical-center-modal"},model:{value:t.leverageModal,callback:function(e){t.leverageModal=e},expression:"leverageModal"}},[s("div",{staticClass:"leverage"},[2==t.leverageType?s("InputNumber",{staticStyle:{width:"100%"},attrs:{size:"large",value:t.leverageAdjustVal},on:{"update:value":function(e){t.leverageAdjustVal=e},"on-change":t.onLeverageChange}}):t._e(),t._v(" "),1==t.leverageType&&1==t.changeLeverageType?s("div",{staticClass:"leverage-panel"},t._l(t.leverageList,function(e){return s("Button",{key:e,class:{leverageSelect:Number(e)===t.leverageAdjustVal},staticStyle:{"margin-left":"5px","margin-right":"5px","margin-bottom":"10px"},on:{click:function(s){t.changeLeverage(Number(e))}}},[t._v(t._s(e)+"X")])})):t._e(),t._v(" "),1==t.leverageType&&2==t.changeLeverageType?s("div",{staticClass:"leverage-panel"},t._l(t.leverageList,function(e){return s("Button",{key:e,class:{leverageSelect:Number(e)===t.leverageAdjustVal},staticStyle:{"margin-left":"5px","margin-right":"5px","margin-bottom":"10px"},on:{click:function(s){t.changeLeverage(Number(e))}}},[t._v(t._s(e)+"X")])})):t._e()],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"default",size:"large"},on:{click:function(e){t.leverageModal=!1}}},[t._v(t._s(t.$t("common.close")))]),t._v(" "),s("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.adjustLeverage()}}},[t._v(t._s(t.$t("common.ok")))])],1)])],1)},staticRenderFns:[]};var g=s("VU/8")(d,m,!1,function(t){s("c7Vi")},"data-v-623547c6",null);e.default=g.exports},c7Vi:function(t,e){}});