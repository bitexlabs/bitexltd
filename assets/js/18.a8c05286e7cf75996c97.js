webpackJsonp([18],{"1uzd":function(t,i){},ZyG7:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={data(){return{user:{},codeIsSending:!1,sendcodeValue:this.$t("uc.regist.sendcode"),countdown:60,formInline:{code:"",fundpwd:""},modal:!1,fundpwd:"",currentCoin:{},transaction:{page:0,pageSize:10,total:0},loading:!0,withdrawAdress:"",inputAddress:"",withdrawAmount:0,withdrawFee:0,withdrawOutAmount:0,coinType:"",coinList:[],tableWithdraw:[],allTableWithdraw:[]}},watch:{currentCoin:function(){this.withdrawFee=this.currentCoin.minTxFee+(this.currentCoin.maxTxFee-this.currentCoin.minTxFee)/2}},methods:{cancel(){this.modal=!1,this.formInline.code="",this.formInline.fundpwd=""},sendCode(){this.$http.post(this.host+"/uc/mobile/withdraw/code").then(t=>{var i=t.body;0==i.code?(this.settime(),this.$Notice.success({title:this.$t("common.tip"),desc:i.message})):this.$Notice.error({title:this.$t("common.tip"),desc:i.message})})},settime(){this.sendcodeValue=this.countdown,this.codeIsSending=!0;let t=setInterval(()=>{this.countdown--,this.sendcodeValue=this.countdown,this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.countdown=60,this.codeIsSending=!1)},1e3)},changePage(t){this.transaction.page=t-1,this.getList()},onAddressChange(t){this.inputAddress=t},clearValues(){this.$refs.address&&this.$refs.address.setQuery(" "),this.withdrawAdress="",this.inputAddress="",this.withdrawAmount=0,this.withdrawOutAmount=0},getCurrentCoinRecharge(){if(""!=this.coinType){for(var t=[],i=0;i<this.allTableWithdraw.length;i++)this.allTableWithdraw[i].coin.unit==this.coinType&&t.push(this.allTableWithdraw[i]);this.tableWithdraw=t}else this.tableWithdraw=this.allTableWithdraw},ok(){if(""==this.formInline.fundpwd)return this.modal=!0,void this.$Message.error(this.$t("otc.chat.msg7tip"));let t={};for(let i=0;i<this.currentCoin.addresses;i++)this.currentCoin.addresses[i].address==this.withdrawAdress&&(t.remark=this.currentCoin.addresses[i].remark);t.unit=this.currentCoin.unit,t.address=this.withdrawAdress,t.amount=this.withdrawAmount,t.fee=this.withdrawFee,t.jyPassword=this.formInline.fundpwd,this.$http.post(this.host+"/uc/withdraw/apply/code",t).then(t=>{this.fundpwd="";var i=t.body;0==i.code?(this.modal=!1,this.formInline.code="",this.formInline.fundpwd="",this.transaction.page=0,this.getList(),this.clearValues(),this.$Message.success(i.message)):this.$Message.error(i.message)})},getAddrList(){this.clearValues(),this.$http.post(this.host+"/uc/withdraw/support/coin/info").then(t=>{var i=t.body;if(0==i.code&&i.data.length>0)if(this.coinList=i.data,this.coinType){for(let t=0;t<i.data.length;t++)if(this.coinType==i.data[t].unit){this.currentCoin=i.data[t];break}}else this.currentCoin=this.coinList[0],this.coinType=this.currentCoin.unit;else this.$Message.error(i.message)})},getList(){this.loading=!0;let t={};t.page=this.transaction.page,t.pageSize=this.transaction.pageSize,this.$http.post(this.host+"/uc/withdraw/record",t).then(t=>{var i=t.body;0==i.code?(this.tableWithdraw=i.data.content,this.transaction.total=i.data.totalElements,this.transaction.page=i.data.number):this.$Message.error(i.message),this.loading=!1})},accSub(t,i){var e,s,a;try{e=t.toString().split(".")[1].length}catch(t){e=0}try{s=i.toString().split(".")[1].length}catch(t){s=0}return((t*(a=Math.pow(10,Math.max(e,s)))-i*a)/a).toFixed(e>=s?e:s)},round(t,i){for(var e=1;i>0;e*=10,i--);for(;i<0;e/=10,i++);return Math.round(t*e)/e},computerAmount(){this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},computerAmount2(){this.withdrawAmount=(this.withdrawAmount+"").replace(/([0-9]+\.[0-9]{6})[0-9]*/,"$1")-0,this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},valid(){return this.withdrawAdress=this.withdrawAdress||this.inputAddress,""==this.coinType?(this.$Message.error(this.$t("uc.finance.withdraw.symboltip")),!1):""==this.withdrawAdress?(this.$Message.error(this.$t("uc.finance.withdraw.addresstip")),!1):""==this.withdrawAmount||0==this.withdrawAmount||this.withdrawAmount-0<this.currentCoin.minAmount?(this.$Message.error(this.$t("uc.finance.withdraw.numtip2")+this.currentCoin.minAmount),!1):this.withdrawAmount-0<this.withdrawFee?(this.$Message.error(this.$t("uc.finance.withdraw.numtip3")),!1):!(""==this.withdrawFee||0==this.withdrawFee||this.withdrawFee-0>this.currentCoin.maxTxFee||this.withdrawFee-0<this.currentCoin.minTxFee)||(this.$Message.error(this.$t("uc.finance.withdraw.feetip1")+this.currentCoin.minTxFee+" , "+this.$t("uc.finance.withdraw.feetip2")+this.currentCoin.maxTxFee),!1)},apply(){if(this.valid()){this.modal=!0;let t=setInterval(()=>{this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.codeIsSending=!1)},1e3)}},getMember(){let t=this;this.$http.post(this.host+"/uc/approve/security/setting").then(i=>{var e=i.body;0==e.code?(this.user=e.data,null==e.data.realName||""==e.data.realName?(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip1")}),t.$router.push("/uc/safe")):0==e.data.fundsVerified&&(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip3")}),t.$router.push("/uc/safe"))):this.$Message.error(e.message)})}},created(){this.getMember(),this.$http.options.emulateJSON=!1,this.coinType=this.$route.query.name||"",this.getAddrList(),this.getList(0,10,1),console.log(this.$store.getters.member)},computed:{member:function(){return console.log(this.$store.getters.member),this.$store.getters.member},tableColumnsWithdraw(){let t=[],i=[];return this.coinList.length>0&&this.coinList.forEach(t=>{i.push({label:t.unit,value:t.unit})}),t.push({title:this.$t("uc.finance.withdraw.time"),width:180,key:"createTime"}),t.push({title:this.$t("uc.finance.withdraw.symbol"),key:"symbol",filters:i,filterMultiple:!1,filterMethod:(t,i)=>i.coin.unit===t,render:function(t,i){return t("span",i.row.coin.unit)}}),t.push({title:this.$t("uc.finance.withdraw.address"),key:"address"}),t.push({title:this.$t("uc.finance.withdraw.num"),key:"totalAmount"}),t.push({title:this.$t("uc.finance.withdraw.fee"),key:"fee"}),t.push({title:this.$t("uc.finance.withdraw.txid"),key:"transactionNumber"}),t.push({title:this.$t("uc.finance.withdraw.status"),key:"status",render:(t,i)=>{let e="";return 0==i.row.status?e=this.$t("uc.finance.withdraw.status_1"):1==i.row.status?e=this.$t("uc.finance.withdraw.status_2"):2==i.row.status?e=this.$t("uc.finance.withdraw.status_3"):3==i.row.status&&(e=this.$t("uc.finance.withdraw.status_4")),t("div",[t("p",e)])}}),t}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"nav-rights withdraw"},[e("div",{staticClass:"nav-right"},[e("div",{staticClass:"rightarea"},[e("section",{staticClass:"trade-groups merchant-tops"},[e("router-link",{attrs:{to:"/uc/withdraw/address"}},[t._v(t._s(t.$t("uc.finance.withdraw.addressmanager")))]),t._v(" "),e("router-link",{staticStyle:{"margin-right":"10px"},attrs:{to:"/uc/withdraw/code"}},[t._v(t._s(t.$t("uc.finance.withdraw.withdrawbycode")))])],1),t._v(" "),e("section",[e("div",{staticClass:"table-inner action-box"},[e("div",{staticClass:"action-inner"},[e("div",{staticClass:"inner-left"},[e("p",{staticClass:"describe"},[t._v(t._s(t.$t("uc.finance.withdraw.symbol")))]),t._v(" "),e("Select",{staticStyle:{width:"100px","margin-top":"14px"},attrs:{placeholder:t.$t("common.pleaseselect")},on:{"on-change":t.getAddrList},model:{value:t.coinType,callback:function(i){t.coinType=i},expression:"coinType"}},t._l(t.coinList,function(i){return e("Option",{key:i.unit,attrs:{value:i.unit}},[t._v(t._s(i.unit))])}))],1),t._v(" "),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"form-group form-address"},[e("label",{staticClass:"controlAddress describe",attrs:{for:"controlAddress"}},[t._v(t._s(t.$t("uc.finance.withdraw.address")))]),t._v(" "),e("div",{staticClass:"control-input-group"},[e("Select",{ref:"address",attrs:{filterable:"",clearable:"",placeholder:t.$t("common.pleaseselect"),noMatch:t.$t("common.nomatch")},on:{"on-query-change":t.onAddressChange},model:{value:t.withdrawAdress,callback:function(i){t.withdrawAdress=i},expression:"withdrawAdress"}},t._l(t.currentCoin.addresses,function(i){return e("Option",{key:i.address,attrs:{value:i.address}},[t._v(t._s(i.remark+"("+i.address+")"))])}))],1)])])]),t._v(" "),e("div",{staticClass:"form-group-container"},[e("div",{staticClass:"form-group form-amount"},[e("label",{staticClass:"label-amount"},[t._v(" "+t._s(t.$t("uc.finance.withdraw.num"))+"\n                  "),e("p",{staticClass:"label-fr"},[e("span",[t._v("【"+t._s(t.$t("uc.finance.withdraw.avabalance"))+"】：\n                      "),e("span",{staticClass:"label-pointer",attrs:{id:"valueAvailable"}},[t._v(t._s(t._f("toFloor")(t.currentCoin.balance)))])]),t._v(" "),0==t.currentCoin.enableAutoWithdraw?e("span",[t._v("【"+t._s(t.$t("common.tip"))+"】："+t._s(t.$t("uc.finance.withdraw.msg1"))+" "+t._s(t.currentCoin.threshold)+" "+t._s(t.$t("uc.finance.withdraw.msg2")))]):t._e(),t._v(" "),e("span",[e("a",{staticStyle:{display:"none"},attrs:{href:"javascript:;",id:"levelUp"}},[t._v(t._s(t.$t("uc.finance.withdraw.increase")))])])])]),t._v(" "),e("div",{staticClass:"input-group"},[e("Poptip",{staticStyle:{width:"100%"},attrs:{trigger:"focus",content:t.$t("uc.finance.withdraw.tip1")+t.currentCoin.withdrawScale+t.$t("uc.finance.withdraw.tip11")+t.currentCoin.minAmount+" ,"+t.$t("uc.finance.withdraw.tip2")+t.currentCoin.maxAmount}},[e("InputNumber",{attrs:{placeholder:t.$t("uc.finance.withdraw.numtip1"),size:"large",min:t.currentCoin.minAmount,max:t.currentCoin.maxAmount},on:{"on-change":t.computerAmount},model:{value:t.withdrawAmount,callback:function(i){t.withdrawAmount=i},expression:"withdrawAmount"}}),t._v(" "),e("span",{staticClass:"input-group-addon addon-tag uppercase firstt"},[t._v(t._s(t.currentCoin.unit))])],1)],1)])]),t._v(" "),e("div",{staticClass:"form-group-container form-group-container2"},[e("div",{staticClass:"form-group form-fee"},[e("label",{staticClass:"label-amount"},[t._v(" "+t._s(t.$t("uc.finance.withdraw.fee"))+"("+t._s(t.currentCoin.unit)+")\n                  ")]),t._v(" "),e("div",{staticClass:"input-group",staticStyle:{"margin-top":"30px"}},[t.currentCoin.maxTxFee>t.currentCoin.minTxFee?e("Slider",{staticStyle:{float:"left",width:"100%"},attrs:{"show-input":"",step:(t.currentCoin.maxTxFee-t.currentCoin.minTxFee)/10,max:t.currentCoin.maxTxFee,min:t.currentCoin.minTxFee},model:{value:t.withdrawFee,callback:function(i){t.withdrawFee=i},expression:"withdrawFee"}}):t._e(),t._v(" "),e("InputNumber",{attrs:{readonly:"",min:t.currentCoin.minTxFee,max:t.currentCoin.maxTxFee,size:"large"},model:{value:t.withdrawFee,callback:function(i){t.withdrawFee=i},expression:"withdrawFee"}}),t._v(" "),e("span",{staticClass:"input-group-addon addon-tag uppercase"},[t._v(t._s(t.currentCoin.unit))])],1)]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("uc.finance.withdraw.arriamount")))]),t._v(" "),e("div",{staticClass:"input-group",staticStyle:{"margin-top":"14px",position:"relative"}},[e("InputNumber",{attrs:{readonly:"",placeholder:t.$t("uc.finance.withdraw.arriamount"),size:"large"},model:{value:t.withdrawOutAmount,callback:function(i){t.withdrawOutAmount=i},expression:"withdrawOutAmount"}}),t._v(" "),e("span",{staticClass:"input-group-addon addon-tag uppercase"},[t._v(t._s(t.currentCoin.unit))])],1)])]),t._v(" "),e("div",{staticClass:"action-foot"},[e("Button",{staticStyle:{height:"40px"},attrs:{id:"withdrawSubmit",long:"",size:"large",type:"primary"},on:{click:t.apply}},[t._v(t._s(t.$t("uc.finance.withdraw.pickup")))])],1),t._v(" "),e("div",{staticClass:"action-content pt10"},[e("div",{staticClass:"action-body"},[e("p",{staticClass:"acb-p1"},[t._v(t._s(t.$t("common.tip")))]),t._v(" "),e("p",{staticClass:"acb-p2"},[t._v("• "+t._s(t.$t("uc.finance.withdraw.msg3"))+"："+t._s(t.currentCoin.minAmount)+" "+t._s(t.coinType)+"。"),e("br"),t._v("• "+t._s(t.$t("uc.finance.withdraw.msg5"))),e("br"),t._v("• "+t._s(t.$t("uc.finance.withdraw.msg6"))+" ")])])]),t._v(" "),e("div",{staticClass:"action-content"},[e("div",{staticClass:"action-body"},[e("p",{staticClass:"acb-p1"},[t._v(t._s(t.$t("uc.finance.withdraw.record")))]),t._v(" "),e("div",{staticClass:"order-table"},[e("p",{staticClass:"acb-p2",staticStyle:{"margin-bottom":"10px"}},[t._v("• "+t._s(t.$t("uc.finance.withdraw.click"))+"\n                    "),e("i",{staticClass:"ivu-icon ivu-icon-funnel"}),t._v(t._s(t.$t("uc.finance.withdraw.filtrate")))]),t._v(" "),e("Table",{attrs:{"no-data-text":t.$t("common.nodata"),columns:t.tableColumnsWithdraw,data:t.tableWithdraw,loading:t.loading}}),t._v(" "),e("div",{attrs:{id:"pages"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{staticClass:"pages_a",attrs:{total:t.transaction.total,current:t.transaction.page+1},on:{"on-change":t.changePage}})],1)])],1)])])])])])]),t._v(" "),e("Modal",{attrs:{width:"450"},model:{value:t.modal,callback:function(i){t.modal=i},expression:"modal"}},[e("p",{attrs:{slot:"header"},slot:"header"},[t._v("\n        "+t._s(t.$t("swap.tip"))+"\n      ")]),t._v(" "),e("Form",{ref:"formInline",staticClass:"withdraw-form-inline",attrs:{model:t.formInline,inline:""}},[e("FormItem",[e("Input",{attrs:{type:"password",placeholder:t.$t("otc.chat.msg7")},model:{value:t.formInline.fundpwd,callback:function(i){t.$set(t.formInline,"fundpwd",i)},expression:"formInline.fundpwd"}})],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("span",{staticStyle:{"margin-right":"50px"},on:{click:t.cancel}},[t._v(t._s(t.$t("common.close")))]),t._v(" "),e("span",{staticStyle:{background:"#f0ac19",color:"#fff",width:"80px","border-radius":"30px",display:"inline-block","text-align":"center",height:"30px","line-height":"30px"},on:{click:t.ok}},[t._v(t._s(t.$t("common.ok")))])])],1)],1)},staticRenderFns:[]};var n=e("VU/8")(s,a,!1,function(t){e("ratv"),e("bY93"),e("1uzd")},"data-v-355a1fec",null);i.default=n.exports},bY93:function(t,i){},ratv:function(t,i){}});